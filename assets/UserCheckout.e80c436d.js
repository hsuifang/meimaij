import{_ as F}from"./PageTitle.7f99d0f6.js";import{l as q,I as L,J as N,r as w,s as g,o as h,a as y,h as o,y as M,K as S,b as e,n as u,w as V,v as C,F as B,e as D,t as d,E as _,f as m,j as T,C as $,D as I,L as z}from"./index.39b5d53b.js";const A={class:"container py-5"},G={class:"row gx-lg-5"},J={class:"col-lg-6"},K=e("h3",{class:"h5 mb-3 mb-md-4 border-start border-4 border-primary ps-3 py-2"},"\u8CFC\u8CB7\u8005\u8CC7\u8A0A",-1),O={class:"mb-3 mb-lg-4"},P=e("label",{for:"name",class:"form-label"},"\u59D3\u540D",-1),R={class:"mb-3 mb-lg-4"},H=e("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"mb-3 mb-lg-4"},W=e("label",{for:"tel",class:"form-label"},"\u96FB\u8A71",-1),X={class:"mb-3 mb-lg-4"},Y=e("label",{for:"address",class:"form-label"},"\u5730\u5740",-1),Z={class:"mb-3 mb-lg-4"},ee=e("label",{for:"message",class:"form-label"},"\u7559\u8A00\u6216\u5099\u8A3B",-1),se=e("div",{class:"text-end d-lg-none"},[e("button",{type:"submit",class:"btn btn-primary px-4 text-white"},"\u8CFC\u8CB7\u78BA\u8A8D")],-1),te={class:"col-lg-6"},oe=e("h3",{class:"h5 mb-md-4 border-start border-4 border-primary ps-3 py-2"},"\u8CFC\u8CB7\u9805\u76EE",-1),le={class:"bg-gray-100 list-group list-group-flush p-2 p-lg-5 mb-3 mb-lg-4"},ae=e("li",{class:"list-group-item d-flex justify-content-md-between"},[e("p",{class:"fw-bold"},[T("\u540D\u7A31 "),e("span",{class:"d-md-none"},"/")]),e("p",{class:"fw-bold"},"\u91D1\u984D")],-1),ne={class:"d-md-flex justify-content-between"},ie={class:"list-group-item d-flex justify-content-between"},de=e("p",{class:"fw-bold"},"\u5C0F\u8A08",-1),ce={class:"fw-bold"},re={class:"list-group-item d-flex justify-content-between"},me=e("p",{class:"fw-bold"},"\u6298\u6263",-1),pe={class:"fw-bold"},ue={class:"list-group-item d-flex justify-content-between"},_e=e("p",{class:"fw-bold"},"\u7E3D\u8A08",-1),be={class:"fw-bold"},fe={class:"list-group-item d-flex justify-content-end"},ge=e("div",{class:"text-end d-none d-lg-block"},[e("button",{type:"submit",class:"btn btn-primary px-4 text-white"},"\u8CFC\u8CB7\u78BA\u8A8D")],-1),xe={__name:"UserCheckout",setup(he){const{toggleLoading:v}=$(),{addNotifications:c}=I(),r=q(),k=L(),l=N({name:"",email:"",tel:"",address:""}),b=w(""),x=w(""),E=async()=>{var n;if(!!couponCode)try{(await z(this.couponCode)).data.success&&(this.fetchCartList(),c({message,type:"success"})),this.couponCode=""}catch(s){c({message:(n=s.response)==null?void 0:n.message,type:"danger"})}},j=async()=>{var n;v(!0);try{const s=await S({user:l,message:b}),{success:f,orderId:i,message:a}=s.data;f?(c({message:a,type:"success"}),k.push(`/order/${i}`)):c({message:a,type:"danger"})}catch(s){c({message:(n=s.response)==null?void 0:n.message,type:"danger"})}v(!1)};return(n,s)=>{const f=F,i=g("VField"),a=g("ErrorMessage"),U=g("VForm");return h(),y("div",A,[o(f),o(U,{onSubmit:j,ref:"form",class:"py-md-3"},{default:M(({errors:p})=>[e("div",G,[e("div",J,[K,e("div",O,[P,o(i,{id:"name",name:"\u59D3\u540D",type:"text",class:u(["form-control",{"is-invalid":p.\u59D3\u540D}]),placeholder:"\u8ACB\u8F38\u5165\u59D3\u540D",rules:"required",modelValue:l.name,"onUpdate:modelValue":s[0]||(s[0]=t=>l.name=t)},null,8,["class","modelValue"]),o(a,{name:"\u59D3\u540D",class:"invalid-feedback"})]),e("div",R,[H,o(i,{id:"email",name:"Email",type:"email",class:u(["form-control",{"is-invalid":p.Email}]),placeholder:"\u8ACB\u8F38\u5165Email",rules:"email|required",modelValue:l.email,"onUpdate:modelValue":s[1]||(s[1]=t=>l.email=t)},null,8,["class","modelValue"]),o(a,{name:"Email",class:"invalid-feedback"})]),e("div",Q,[W,o(i,{id:"tel",name:"\u96FB\u8A71",type:"tel",class:u(["form-control",{"is-invalid":p.\u96FB\u8A71}]),placeholder:"\u8ACB\u8F38\u5165\u96FB\u8A71",rules:"min:8|max:10|required",modelValue:l.tel,"onUpdate:modelValue":s[2]||(s[2]=t=>l.tel=t)},null,8,["class","modelValue"]),o(a,{name:"\u96FB\u8A71",class:"invalid-feedback"})]),e("div",X,[Y,o(i,{id:"address",name:"\u5730\u5740",type:"text",class:u(["form-control",{"is-invalid":p.\u5730\u5740}]),placeholder:"\u8ACB\u8F38\u5165\u5730\u5740",rules:"required",modelValue:l.address,"onUpdate:modelValue":s[3]||(s[3]=t=>l.address=t)},null,8,["class","modelValue"]),o(a,{name:"\u5730\u5740",class:"invalid-feedback"})]),e("div",Z,[ee,V(e("textarea",{id:"message",cols:"30",rows:"2",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=t=>b.value=t)},null,512),[[C,b.value]])]),se]),e("div",te,[oe,e("ul",le,[ae,(h(!0),y(B,null,D(m(r).carts,t=>(h(),y("li",{class:"list-group-item",key:t.id},[e("div",ne,[e("p",null,d(t.product.title)+" x "+d(t.qty),1),e("p",null,d(_(t.product.price)),1)])]))),128)),e("li",ie,[de,e("p",ce,d(_(m(r).price.total)),1)]),e("li",re,[me,e("p",pe,d(_(m(r).price.total-m(r).price.final)),1)]),e("li",ue,[_e,e("p",be,d(_(m(r).price.final)),1)]),e("li",fe,[V(e("input",{id:"coupon",type:"text",class:"form-control me-2",style:{width:"200px"},"onUpdate:modelValue":s[5]||(s[5]=t=>x.value=t)},null,512),[[C,x.value]]),e("button",{type:"button",class:"btn btn-secondary text-white",onClick:E}," \u512A\u60E0\u5238 ")])]),ge])])]),_:1},512)])}}};export{xe as default};
